#!/usr/bin/env sh

# Minimal Gradle wrapper launcher.
# Automatically downloads gradle-wrapper.jar if missing.

DIR="$(CDPATH= cd -- "$(dirname -- "$0")" && pwd)"
WRAPPER_DIR="$DIR/gradle/wrapper"
WRAPPER_JAR="$WRAPPER_DIR/gradle-wrapper.jar"
WRAPPER_URL="https://services.gradle.org/distributions/gradle-9.2.1-wrapper.jar"

if [ ! -f "$WRAPPER_JAR" ]; then
  echo "Missing $WRAPPER_JAR"
  echo "Downloading Gradle wrapper jar..."
  mkdir -p "$WRAPPER_DIR"
  if command -v curl >/dev/null 2>&1; then
    curl -L -o "$WRAPPER_JAR" "$WRAPPER_URL"
  elif command -v wget >/dev/null 2>&1; then
    wget -O "$WRAPPER_JAR" "$WRAPPER_URL"
  else
    echo "Neither curl nor wget found. Please download:"
    echo "  $WRAPPER_URL"
    echo "and save it as: gradle/wrapper/gradle-wrapper.jar"
    exit 1
  fi
  if [ ! -f "$WRAPPER_JAR" ]; then
    echo "Failed to download $WRAPPER_URL"
    exit 1
  fi
fi

exec java -classpath "$WRAPPER_JAR" org.gradle.wrapper.GradleWrapperMain "$@"
